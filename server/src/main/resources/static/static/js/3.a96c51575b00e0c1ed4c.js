webpackJsonp([3],{"53sp":function(t,s){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABSklEQVQ4T6WTTVLCUBCEp1NGlsZFEpZwA2+gnMB4AnRrsEpOAgtwazyB8QZyA24g7gJYZbIM0Qw1+UNCiFSRZeb197rnzYCO/FDWfw80LTptdIlhEfFFWseUwK66Cl/O+77/V7MF+HoyrDjGMwFapTFmH4wb/cF7z+sFIBGz8npIIsTUySEJILGtNj6qbmbityQE4bqAM/tqFLYlTgJYjsxHBgZ7br8zbM9ZjJoOgbqFdea+3psPE8Bi3JRMl/tyE+KOYS+nJcjEsL2rHMAiFrtKjGEZxMqvLwD5Px+brsRhoplpe+0ywFWwCxChfu9NtgBMn2bPa/0fIbVT1YdNhLomImtWbROz6ZsR4WwnP7GbPaO1qXGgrsJW8YxSOGqQcnIKgVPlJD3DAWJYlaOcQyTOj9q4ZcgyyWxwIMsEZvckCp3aZTpkD8pn1i/4sREBwwc5AAAAAElFTkSuQmCC"},X0of:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e("mvHQ"),i=e.n(a),l={name:"material",data:function(){return{dataList:[],materialList:[],supplierList:[],qouteModelList:[],addQuoteModel:!1,addList:["meterial","supplier","price","count"],editList:[],editId:"",editQuoteModel:!1,total:0,pageSize:5,pageNo:1,QuoteModel:!1,projectName:"",qouteList:[],qouteId:"",projectList:{},isShowNew:!1,totalOld:0,totalNew:0}},components:{},methods:{addModel:function(){this.addQuoteModel=!0},addModelCancel:function(){this.addQuoteModel=!1,this.addList=["meterial","supplier","price","count"]},addModelConfirm:function(){var t=this,s=[],e={};for(var a in this.addList)switch(this.addList[a]){case"meterial":e={value:"meterial",name:"物料名称"},s.push(e);break;case"supplier":e={value:"supplier",name:"供应商"},s.push(e);break;case"price":e={value:"price",name:"价格"},s.push(e);break;case"count":e={value:"count",name:"数量"},s.push(e);break;case"supplierUser":e={value:"supplierUser",name:"联系人"},s.push(e);break;case"supplierPhone":e={value:"supplierPhone",name:"联系方式"},s.push(e);break;case"unit":e={value:"unit",name:"计量单位"},s.push(e);break;case"address":e={value:"address",name:"详细地址"},s.push(e)}this.$axios({method:"post",url:"template/save",data:this.qs.stringify({contains:i()(s)})}).then(function(s){"200"==s.data.code?(t.addQuoteModel=!1,t.addList=["meterial","supplier","price","count"],t.loadData()):t.$Message.error(s.data.msg)})},editModel:function(t,s){this.editId=t,this.editQuoteModel=!0;var e=JSON.parse(s);for(var a in e)this.editList.push(e[a].value)},editModelCancel:function(){this.editQuoteModel=!1,this.editList=[],this.editId=""},editModelConfirm:function(){var t=this,s=[],e={};for(var a in this.editList)switch(this.editList[a]){case"meterial":e={value:"meterial",name:"物料名称"},s.push(e);break;case"supplier":e={value:"supplier",name:"供应商"},s.push(e);break;case"price":e={value:"price",name:"价格"},s.push(e);break;case"count":e={value:"count",name:"数量"},s.push(e);break;case"supplierUser":e={value:"supplierUser",name:"联系人"},s.push(e);break;case"supplierPhone":e={value:"supplierPhone",name:"联系方式"},s.push(e);break;case"unit":e={value:"unit",name:"计量单位"},s.push(e);break;case"address":e={value:"address",name:"详细地址"},s.push(e)}this.$axios({method:"post",url:"template/update",data:this.qs.stringify({id:this.editId,contains:i()(s)})}).then(function(s){"200"==s.data.code?(t.loadData(),t.editQuoteModel=!1,t.editId=""):t.$Message.error(s.data.msg)})},changePage:function(t){this.pageNo=t,this.loadData()},deleteModel:function(t){var s=this;this.$axios({method:"post",url:"template/deleteById",data:this.qs.stringify({id:t})}).then(function(t){"200"==t.data.code?(s.$Message.success(t.data.msg),s.loadData()):s.$Message.error(t.data.msg)})},loadData:function(){var t=this;this.$axios({method:"get",url:"template/page",params:{pageIndex:this.pageNo,limit:this.pageSize}}).then(function(s){"200"==s.data.code?(t.dataList=s.data.pagination.datas,t.total=s.data.pagination.total&&s.data.pagination?s.data.pagination.total:0):t.$Message.error(s.data.msg)})},toQuote:function(t,s){this.qouteModelList=[],this.projectName="",this.projectList={},this.QuoteModel=!0,this.isShowNew=!0,this.qouteId=t,this.qouteList=JSON.parse(s);var e={};for(var a in this.qouteList)"meterial"==this.qouteList[a].value?e.meterial="":"supplier"==this.qouteList[a].value?e.supplier="":"price"==this.qouteList[a].value?e.price="":"count"==this.qouteList[a].value?e.count="":"supplierUser"==this.qouteList[a].value?e.supplierUser="":"supplierPhone"==this.qouteList[a].value?e.supplierPhone="":"unit"==this.qouteList[a].value?e.unit="":"address"==this.qouteList[a].value&&(e.address="");e.ratio=1,this.projectList=e,console.log(this.projectList)},qouteAdd:function(){for(var t in this.projectList)if(!this.projectList[t])return void this.$Message.error({content:" 每一项加入时都不能为空",duration:2e3});this.isShowNew=!1;var s=this.projectList;s.qouteNum=s.price*s.count,s.factNum=s.price*s.count*s.ratio,this.qouteModelList.push(s),this.totalOld=this.totalOld+s.qouteNum,this.totalNew=this.totalNew+s.factNum,this.projectList={}},quoteCancel:function(){this.QuoteModel=!1,this.qouteId="",this.qouteList=[],this.projectList={},this.totalOld=0,this.totalNew=0,this.qouteModelList=[]},quoteConfirm:function(){var t=this;if(this.projectName)if(this.qouteModelList.length<=0)this.$Message.error({content:"报价内容不能为空",duration:2e3});else if(this.totalOld<=0)this.$Message.error({content:"报价总计不能0",duration:2e3});else if(this.totalNew<=0)this.$Message.error({content:"实际报价总计不能0",duration:2e3});else{this.$axios({method:"post",url:"quote/save",data:this.qs.stringify({templateId:this.qouteId,projectName:this.projectName,totalOld:this.totalOld,totalNew:this.totalNew,contains:i()(this.qouteModelList)})}).then(function(s){"200"==s.data.code?(t.$Message.success(s.data.msg),t.QuoteModel=!1,t.qouteId="",t.qouteList=[],t.totalOld=0,t.totalNew=0):t.$Message.error(s.data.msg)})}else this.$Message.error({content:"项目名不能为空",duration:2e3})},loadMaterial:function(){var t=this;this.$axios({method:"get",url:"material/list"}).then(function(s){"200"==s.data.code?t.materialList=s.data.data:t.$Message.error(s.data.msg)})},openSupplier:function(){this.projectList.meterial||this.$Message.error("请先选择物料名称！")},loadSupplier:function(t){var s=this,e="";for(var a in this.materialList)t==this.materialList[a].materialName&&(e=this.materialList[a].materialName);if(e){this.supplierList=[];this.$axios({method:"get",url:"material/getSuppListByMaterialName",params:{materialName:e}}).then(function(t){"200"==t.data.code?s.supplierList=t.data.data:s.$Message.error(t.data.msg)})}},toAddNewName:function(){this.isShowNew=!0,this.projectList={};var t={};for(var s in this.qouteList)"meterial"==this.qouteList[s].value?t.meterial="":"supplier"==this.qouteList[s].value?t.supplier="":"price"==this.qouteList[s].value?t.price="":"count"==this.qouteList[s].value?t.count="":"supplierUser"==this.qouteList[s].value?t.supplierUser="":"supplierPhone"==this.qouteList[s].value?t.supplierPhone="":"unit"==this.qouteList[s].value?t.unit="":"address"==this.qouteList[s].value&&(t.address="");t.ratio=1,this.projectList=t}},mounted:function(){this.loadData(),this.loadMaterial()}},o={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",[a("div",{staticClass:"titleWrap"},[a("div",{staticClass:"title"},[t._v("\n      报价模板列表：\n    ")]),t._v(" "),a("div",{staticClass:"titleRight"},[a("div",{staticClass:"count"},[t._v("\n        共有信息 "),a("span",{staticClass:"font_red font_blod font_mr"},[t._v(t._s(t.total))]),t._v("条\n      ")])]),t._v(" "),a("div",{staticClass:"add putHover",on:{click:t.addModel}},[t._v("\n      新增模板"),a("img",{attrs:{src:e("QBcd"),alt:""}})])]),t._v(" "),t.total<=0?a("li",{staticClass:"nodata shadow"},[t._v("\n        暂无数据\n  ")]):t._l(t.dataList,function(s,e){return a("div",{key:e,staticClass:"listWrap shadow"},[t._m(0,!0),t._v(" "),a("ul",{staticClass:"list"},[t._l(JSON.parse(s.contains),function(s,e){return a("li",{key:e,staticClass:"li_div right_border"},[t._v(t._s(s.name))])}),t._v(" "),a("li",{staticClass:"li_div right_border"},[t._v("报价小计")]),t._v(" "),a("li",{staticClass:"li_div right_border"},[t._v("系数")]),t._v(" "),a("li",{staticClass:"li_div right_border"},[t._v("实际小计")])],2),t._v(" "),a("ul",{staticClass:"list"}),t._v(" "),t._m(1,!0),t._v(" "),a("ul",{staticClass:"operate"},[a("span",{staticClass:"font_mr edit putHover",on:{click:function(e){return t.editModel(s.id,s.contains)}}},[t._v("修改")]),t._v(" "),a("span",{staticClass:"font_mr delete putHover",on:{click:function(e){return t.deleteModel(s.id)}}},[t._v("删除")]),t._v(" "),a("span",{staticClass:"font_mr toHistory putHover",on:{click:function(e){return t.toQuote(s.id,s.contains)}}},[t._v("用此模板去报价")])])])}),t._v(" "),a("div",{staticClass:"pageWrap"},[a("Page",{attrs:{total:t.total,current:t.pageNo,"page-size":t.pageSize,"prev-text":"上一页","next-text":"下一页"},on:{"on-change":t.changePage}})],1),t._v(" "),a("div",{staticClass:"modelWrap"},[a("Modal",{staticClass:"addModel",attrs:{closable:!1,"mask-closable":!1,width:"360"},model:{value:t.addQuoteModel,callback:function(s){t.addQuoteModel=s},expression:"addQuoteModel"}},[a("p",{staticClass:"modelTitle",attrs:{slot:"header"},slot:"header"},[t._v("\n          新增报价模板\n      ")]),t._v(" "),a("div",{staticClass:"modelContent"},[a("CheckboxGroup",{model:{value:t.addList,callback:function(s){t.addList=s},expression:"addList"}},[a("div",{staticClass:"addName"},[a("p",[t._v("必填：")])]),t._v(" "),a("div",{staticClass:"addName"},[a("Checkbox",{staticClass:"item5",attrs:{label:"meterial",disabled:""}},[t._v("材料名称")]),t._v(" "),a("Checkbox",{staticClass:"item5",attrs:{label:"supplier",disabled:""}},[t._v("供应商")])],1),t._v(" "),a("div",{staticClass:"addName"},[a("Checkbox",{staticClass:"item5",attrs:{label:"price",disabled:""}},[t._v("价格")]),t._v(" "),a("Checkbox",{staticClass:"item5",attrs:{label:"count",disabled:""}},[t._v("数量")])],1),t._v(" "),a("div",{staticClass:"addName"},[a("p",[t._v("选填：")])]),t._v(" "),a("div",{staticClass:"addName"},[a("Checkbox",{staticClass:"item5",attrs:{label:"supplierUser"}},[t._v("联系人")]),t._v(" "),a("Checkbox",{staticClass:"item5",attrs:{label:"supplierPhone"}},[t._v("联系电话")])],1),t._v(" "),a("div",{staticClass:"addName"},[a("Checkbox",{staticClass:"item5",attrs:{label:"unit"}},[t._v("计量单位")]),t._v(" "),a("Checkbox",{staticClass:"item5",attrs:{label:"address"}},[t._v("详细地址")])],1)])],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("div",{staticClass:"modelBtnWraP"},[a("span",{staticClass:"cancel",on:{click:t.addModelCancel}},[t._v("取消")]),t._v(" "),a("span",{staticClass:"confirm",on:{click:t.addModelConfirm}},[t._v("确认")])])])]),t._v(" "),a("Modal",{staticClass:"addModel",attrs:{closable:!1,"mask-closable":!1,width:"360"},model:{value:t.editQuoteModel,callback:function(s){t.editQuoteModel=s},expression:"editQuoteModel"}},[a("p",{staticClass:"modelTitle",attrs:{slot:"header"},slot:"header"},[t._v("\n          新增报价模板\n      ")]),t._v(" "),a("div",{staticClass:"modelContent"},[a("CheckboxGroup",{model:{value:t.editList,callback:function(s){t.editList=s},expression:"editList"}},[a("div",{staticClass:"addName"},[a("p",[t._v("必填：")])]),t._v(" "),a("div",{staticClass:"addName"},[a("Checkbox",{staticClass:"item5",attrs:{label:"meterial",disabled:""}},[t._v("材料名称")]),t._v(" "),a("Checkbox",{staticClass:"item5",attrs:{label:"supplier",disabled:""}},[t._v("供应商")])],1),t._v(" "),a("div",{staticClass:"addName"},[a("Checkbox",{staticClass:"item5",attrs:{label:"price",disabled:""}},[t._v("价格")]),t._v(" "),a("Checkbox",{staticClass:"item5",attrs:{label:"count",disabled:""}},[t._v("数量")])],1),t._v(" "),a("div",{staticClass:"addName"},[a("p",[t._v("选填：")])]),t._v(" "),a("div",{staticClass:"addName"},[a("Checkbox",{staticClass:"item5",attrs:{label:"supplierUser"}},[t._v("联系人")]),t._v(" "),a("Checkbox",{staticClass:"item5",attrs:{label:"supplierPhone"}},[t._v("联系电话")])],1),t._v(" "),a("div",{staticClass:"addName"},[a("Checkbox",{staticClass:"item5",attrs:{label:"unit"}},[t._v("计量单位")]),t._v(" "),a("Checkbox",{staticClass:"item5",attrs:{label:"address"}},[t._v("详细地址")])],1)])],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("div",{staticClass:"modelBtnWraP"},[a("span",{staticClass:"cancel",on:{click:t.editModelCancel}},[t._v("取消")]),t._v(" "),a("span",{staticClass:"confirm",on:{click:t.editModelConfirm}},[t._v("确认")])])])]),t._v(" "),a("Modal",{staticClass:"addModel",attrs:{closable:!1,"mask-closable":!1,width:"1100"},model:{value:t.QuoteModel,callback:function(s){t.QuoteModel=s},expression:"QuoteModel"}},[a("p",{staticClass:"modelTitle",attrs:{slot:"header"},slot:"header"},[t._v("\n          填写报价信息\n      ")]),t._v(" "),a("div",{staticClass:"modelContent"},[a("div",{staticClass:"type_content"},[a("span",{staticClass:"input_name"},[t._v("项目名称：")]),t._v(" "),a("Input",{staticClass:"model_input",attrs:{type:"text",placeholder:"请输入项目名称",maxlength:9},model:{value:t.projectName,callback:function(s){t.projectName=s},expression:"projectName"}})],1),t._v(" "),a("div",{staticClass:"listWrap shadow"},[a("ul",{staticClass:"list"},[t._l(t.qouteList,function(s,e){return a("li",{key:e,staticClass:"li_div right_border"},[t._v(t._s(s.name))])}),t._v(" "),a("li",{staticClass:"li_div right_border"},[t._v("报价小计")]),t._v(" "),a("li",{staticClass:"li_div right_border"},[t._v("系数")]),t._v(" "),a("li",{staticClass:"li_div right_border"},[t._v("实际小计")]),t._v(" "),a("li",{staticClass:"li_div "},[t._v("状态")])],2),t._v(" "),t._l(t.qouteModelList,function(s,e){return a("ul",{key:e,staticClass:"list"},[a("li",{staticClass:"li_div right_border"},[a("span",[t._v(t._s(s.meterial))])]),t._v(" "),a("li",{staticClass:"li_div right_border"},[a("span",[t._v(t._s(s.supplier))])]),t._v(" "),a("li",{staticClass:"li_div right_border"},[a("span",[t._v(t._s(s.price))])]),t._v(" "),a("li",{staticClass:"li_div right_border"},[a("span",[t._v(t._s(s.count))])]),t._v(" "),null!=s.supplierUser?a("li",{staticClass:"li_div right_border"},[a("span",[t._v(t._s(s.supplierUser))])]):t._e(),t._v(" "),null!=s.supplierPhone?a("li",{staticClass:"li_div right_border"},[a("span",[t._v(t._s(s.supplierPhone))])]):t._e(),t._v(" "),null!=s.unit?a("li",{staticClass:"li_div right_border"},[a("span",[t._v(t._s(s.unit))])]):t._e(),t._v(" "),null!=s.address?a("li",{staticClass:"li_div right_border"},[a("span",[t._v(t._s(s.address))])]):t._e(),t._v(" "),a("li",{staticClass:"li_div right_border"},[t._v(t._s(s.qouteNum))]),t._v(" "),a("li",{staticClass:"li_div right_border"},[a("span",[t._v(t._s(s.ratio))])]),t._v(" "),s?a("li",{staticClass:"li_div right_border"},[t._v(t._s(s.factNum))]):t._e(),t._v(" "),a("li",{staticClass:"li_div "},[a("span",[t._v("已加入")])])])}),t._v(" "),t.isShowNew?a("ul",{staticClass:"list"},[t.projectList?a("li",{staticClass:"li_div right_border"},[a("Select",{staticStyle:{width:"90px"},attrs:{placeholder:"请选择物料名称",size:"small"},on:{"on-change":function(s){return t.loadSupplier(t.projectList.meterial)}},model:{value:t.projectList.meterial,callback:function(s){t.$set(t.projectList,"meterial",s)},expression:"projectList.meterial"}},t._l(t.materialList,function(s){return a("Option",{key:s.materialId,attrs:{value:s.materialName}},[t._v(t._s(s.materialName))])}),1)],1):t._e(),t._v(" "),t.projectList?a("li",{staticClass:"li_div right_border"},[a("Select",{staticStyle:{width:"90px"},attrs:{placeholder:"请选择供应商",size:"small"},on:{"on-open-change":t.openSupplier},model:{value:t.projectList.supplier,callback:function(s){t.$set(t.projectList,"supplier",s)},expression:"projectList.supplier"}},t._l(t.supplierList,function(s){return a("Option",{key:s.supplierId,attrs:{value:s.supplierName}},[t._v(t._s(s.supplierName))])}),1)],1):t._e(),t._v(" "),t.projectList?a("li",{staticClass:"li_div right_border"},[a("Input",{staticClass:"addName_input",attrs:{placeholder:"请输入价格",type:"number"},model:{value:t.projectList.price,callback:function(s){t.$set(t.projectList,"price",s)},expression:"projectList.price"}})],1):t._e(),t._v(" "),t.projectList?a("li",{staticClass:"li_div right_border"},[a("Input",{staticClass:"addName_input",attrs:{placeholder:"请输入数量",type:"number"},model:{value:t.projectList.count,callback:function(s){t.$set(t.projectList,"count",s)},expression:"projectList.count"}})],1):t._e(),t._v(" "),t.projectList&&null!=t.projectList.supplierUser?a("li",{staticClass:"li_div right_border"},[a("Input",{staticClass:"addName_input",attrs:{placeholder:"请输入联系人"},model:{value:t.projectList.supplierUser,callback:function(s){t.$set(t.projectList,"supplierUser",s)},expression:"projectList.supplierUser"}})],1):t._e(),t._v(" "),t.projectList&&null!=t.projectList.supplierPhone?a("li",{staticClass:"li_div right_border"},[a("Input",{staticClass:"addName_input",attrs:{placeholder:"请输入联系方式"},model:{value:t.projectList.supplierPhone,callback:function(s){t.$set(t.projectList,"supplierPhone",s)},expression:"projectList.supplierPhone"}})],1):t._e(),t._v(" "),t.projectList&&null!=t.projectList.unit?a("li",{staticClass:"li_div right_border"},[a("Input",{staticClass:"addName_input",attrs:{placeholder:"请输入计量单位"},model:{value:t.projectList.unit,callback:function(s){t.$set(t.projectList,"unit",s)},expression:"projectList.unit"}})],1):t._e(),t._v(" "),t.projectList&&null!=t.projectList.address?a("li",{staticClass:"li_div right_border"},[a("Input",{staticClass:"addName_input",attrs:{placeholder:"请输入详细地址"},model:{value:t.projectList.address,callback:function(s){t.$set(t.projectList,"address",s)},expression:"projectList.address"}})],1):t._e(),t._v(" "),t.projectList?a("li",{staticClass:"li_div right_border"},[t._v(t._s(t.projectList.price*t.projectList.count))]):t._e(),t._v(" "),t.projectList?a("li",{staticClass:"li_div right_border"},[a("Input",{staticClass:"addName_input",attrs:{placeholder:"请输入系数",type:"number"},model:{value:t.projectList.ratio,callback:function(s){t.$set(t.projectList,"ratio",s)},expression:"projectList.ratio"}})],1):t._e(),t._v(" "),t.projectList?a("li",{staticClass:"li_div right_border"},[t._v(t._s(t.projectList.price*t.projectList.count*t.projectList.ratio?t.projectList.price*t.projectList.count*t.projectList.ratio:0))]):t._e(),t._v(" "),a("li",{staticClass:"li_div "},[a("span",{staticClass:"putHover",staticStyle:{color:"blue"},on:{click:function(s){return t.qouteAdd()}}},[t._v("加入")])])]):t._e(),t._v(" "),a("ul",{staticClass:"list"},[a("img",{staticClass:"putHover",attrs:{src:e("QBcd"),alt:""},on:{click:t.toAddNewName}})]),t._v(" "),a("ul",{staticClass:"list"},[a("li",{staticClass:"li_div right_border"},[t._v("报价合计")]),t._v(" "),a("li",{staticClass:"total right_border"},[t._v(t._s(t.totalOld))]),t._v(" "),a("li",{staticClass:"li_div right_border"},[t._v("实际合计")]),t._v(" "),a("li",{staticClass:"total "},[t._v(t._s(t.totalNew))])])],2)]),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("div",{staticClass:"modelBtnWraP"},[a("span",{staticClass:"cancel",on:{click:t.quoteCancel}},[t._v("取消")]),t._v(" "),a("span",{staticClass:"confirm",on:{click:t.quoteConfirm}},[t._v("确认")])])])])],1)],2)},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("ul",{staticClass:"list"},[s("li",{staticClass:"li_div "},[this._v("项目名")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",{staticClass:"list"},[s("li",{staticClass:"li_div right_border"},[this._v("报价合计")]),this._v(" "),s("li",{staticClass:"total right_border"}),this._v(" "),s("li",{staticClass:"li_div right_border"},[this._v("实际合计")]),this._v(" "),s("li",{staticClass:"total "})])}]};var r={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("div",{staticClass:"titleWrap"},[e("div",{staticClass:"title"},[t._v("\n      历史报价方案列表：\n    ")]),t._v(" "),e("div",{staticClass:"titleRight"},[e("div",{staticClass:"count"},[t._v("\n        共有信息 "),e("span",{staticClass:"font_red font_blod font_mr"},[t._v(t._s(t.total))]),t._v("条\n      ")])]),t._v(" "),e("div",{staticClass:"add"},[e("Select",{staticStyle:{width:"100px"},attrs:{size:"small"},on:{"on-change":t.changeStatus},model:{value:t.auditStatus,callback:function(s){t.auditStatus=s},expression:"auditStatus"}},t._l(t.auditStatusList,function(s){return e("Option",{key:s.value,attrs:{value:s.value}},[t._v(t._s(s.label))])}),1)],1)]),t._v(" "),e("div",{staticClass:"listWrap "},[e("ul",{staticClass:"list shadow"},[t._m(0),t._v(" "),t.total<=0?e("li",{staticClass:"nodata shadow"},[t._v("\n            暂无数据\n      ")]):t._l(t.dataList,function(s,a){return e("li",{key:a,staticClass:"listLi listContent"},[e("div",{staticClass:"leftText"},[t._v(t._s(s.projectId))]),t._v(" "),e("div",{staticClass:"li_div"},[t._v(t._s(s.projectName))]),t._v(" "),e("div",{staticClass:"li_div"},[t._v(t._s(1==s.auditStatus?"是":"否"))]),t._v(" "),e("div",{staticClass:"operate"},[e("span",{staticClass:"edit putHover font_mr",on:{click:function(e){return t.auditStatusQuote(s.id)}}},[t._v("审核通过")]),t._v(" "),e("span",{staticClass:"history putHover font_mr",on:{click:function(e){return t.todetail(s.id,s.templateId)}}},[t._v("查看详情")]),t._v(" "),e("span",{staticClass:"delete putHover font_mr",on:{click:function(e){return t.deleteQuote(s.id)}}},[t._v("删除")])])])})],2),t._v(" "),e("div",{staticClass:"pageWrap"},[e("Page",{attrs:{total:t.total,current:t.pageNo,"page-size":t.pageSize,"prev-text":"上一页","next-text":"下一页"},on:{"on-change":t.changePage}})],1)])])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("li",{staticClass:"listTitle listLi"},[s("div",{staticClass:"leftText"},[this._v("项目编号")]),this._v(" "),s("div",{staticClass:"li_div"},[this._v("项目名称")]),this._v(" "),s("div",{staticClass:"li_div"},[this._v("是否审核")]),this._v(" "),s("div",{staticClass:"operate"},[this._v("操作")])])}]};var c={name:"register",data:function(){return{active:1,visible:!1}},components:{quoteModel:e("VU/8")(l,o,!1,function(t){e("pWKP")},"data-v-2e63f08b",null).exports,quoteHistory:e("VU/8")({name:"enquiry",data:function(){return{total:0,pageSize:5,pageNo:1,auditStatus:"",auditStatusList:[{label:"全部",value:""},{label:"已审核",value:"1"},{label:"未审核",value:"0"}]}},components:{},methods:{todetail:function(t,s){this.$router.push({path:"/quoteDetail",query:{id:t,templateId:s}})},loadData:function(){var t=this;this.$axios({method:"get",url:"quote/page",params:{pageIndex:this.pageNo,limit:this.pageSize,auditStatus:this.auditStatus}}).then(function(s){"200"==s.data.code?(t.dataList=s.data.pagination.datas,t.total=s.data.pagination.total&&s.data.pagination?s.data.pagination.total:0):t.$Message.error(s.data.msg)})},auditStatusQuote:function(t){var s=this;this.$axios({method:"post",url:"quote/audit",data:this.qs.stringify({id:t})}).then(function(t){"200"==t.data.code?(s.$Message.success(t.data.msg),s.loadData(),s.auditStatus=""):s.$Message.error(t.data.msg)})},changeStatus:function(){this.loadData()},changePage:function(t){this.pageNo=t,this.loadData()},deleteQuote:function(t){var s=this;this.$axios({method:"post",url:"quote/deleteById",data:this.qs.stringify({id:t})}).then(function(t){"200"==t.data.code?(s.$Message.success(t.data.msg),s.loadData()):s.$Message.error(t.data.msg)})}},mounted:function(){this.loadData()}},r,!1,function(t){e("pwaQ")},"data-v-4d9c0949",null).exports},methods:{changeTab:function(t){this.active=t,this.visible=!1}},mounted:function(){}},n={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",[a("div",{staticClass:"tabWrap"},[a("div",{staticClass:"tabLeft"},[a("span",{staticClass:"putHover",class:1==t.active?"active":"",on:{click:function(s){return t.changeTab(1)}}},[t._v("报价模板")]),t._v(" "),a("span",{staticClass:"tab_line"},[t._v("|")]),t._v(" "),a("span",{staticClass:"putHover",class:2==t.active?"active":"",on:{click:function(s){return t.changeTab(2)}}},[t._v("历史报价方案")])]),t._v(" "),a("div",{staticClass:"tabRight "},[a("Poptip",{staticClass:"add ",attrs:{placement:"bottom-end",title:""},model:{value:t.visible,callback:function(s){t.visible=s},expression:"visible"}},[t._v("\n              去新增报价"),a("img",{attrs:{src:e("53sp"),alt:""}}),t._v(" "),a("div",{attrs:{slot:"content"},slot:"content"},[a("div",{staticClass:"addBtn putHover",on:{click:function(s){return t.changeTab(1)}}},[t._v("去报价模板新增")]),t._v(" "),a("div",{staticClass:"addBtn putHover",on:{click:function(s){return t.changeTab(2)}}},[t._v("去采纳历史方案")])])])],1)]),t._v(" "),a("div",{staticClass:"contentWrap"},[1==t.active?a("quoteModel"):t._e(),t._v(" "),2==t.active?a("quoteHistory"):t._e()],1)])},staticRenderFns:[]};var d=e("VU/8")(c,n,!1,function(t){e("w0MF")},"data-v-d250b0be",null);s.default=d.exports},mvHQ:function(t,s,e){t.exports={default:e("qkKv"),__esModule:!0}},pWKP:function(t,s){},pwaQ:function(t,s){},qkKv:function(t,s,e){var a=e("FeBl"),i=a.JSON||(a.JSON={stringify:JSON.stringify});t.exports=function(t){return i.stringify.apply(i,arguments)}},w0MF:function(t,s){}});
//# sourceMappingURL=3.a96c51575b00e0c1ed4c.js.map